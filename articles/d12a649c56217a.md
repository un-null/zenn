---
title: "Reduceé–¢æ•°ã‚’ä½¿ã£ã¦ã¿ã‚ˆã†"
emoji: "ğŸƒ"
type: "tech"
topics:
  - "javascript"
  - "react"
  - "typescript"
published: true
published_at: "2022-10-31 16:30"
---

Reduceé–¢æ•°ã€ä½¿ãˆã‚‹ã¨ãªã‚“ã ã‹ã„ã„æ°—åˆ†ã€‚
https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce

# åŸºæœ¬ã®å½¢
```js
array.reduce((previousValue, currentValue) => {} , initialValue)
```
é…åˆ—ã‹ã‚‰é…åˆ—ä»¥å¤–ã‚’å«ã‚€ä»»æ„ã®å€¤ã‚’ä½œæˆã—ãŸã„å ´åˆã«åˆ©ç”¨ã—ã¾ã™ã€‚é…åˆ—ãŒç©ºã§ã€initialValueã‚‚ãªã„å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

# ãƒ‡ãƒ¢
ã¾ãšã¯ä¾‹ã‚’è¦‹ãŸæ–¹ãŒç†è§£ã—ã‚„ã™ã„ã¨æ€ã†ã®ã§ã€ä¸€ã¤ç´¹ä»‹ã—ã¾ã™ã€‚ä»¥ä¸‹ã¯é…åˆ—ã®è¦ç´ ã‚’åˆè¨ˆã™ã‚‹å‡¦ç†ã§ã™ã€‚
```js
// å¯¾è±¡ã®é…åˆ—
const array = [1, 2, 3];
// åˆæœŸå€¤
const initialValue = 0;

//å‡¦ç†
const output = array.reduce((prev, current) => {
  return prev + current
}, initialValue);

console.log(output) // -> 6
```
ä¸­ã§è¡Œã‚ã‚Œã¦ã„ã‚‹å‡¦ç†ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚
```
// 1å›ç›®
{ "prev": 0, "current": 1 }
// 2å›ç›®
{ "prev": 1, "current": 2 }
// 3å›ç›®
{ "prev": 3, "current": 3 }

//çµæœ
6
```
# å¼•æ•°
```js
array.reduce(callbackFn, initialValue)
```
**ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°** ã§ã¯å…¨éƒ¨ã§4ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã¾ã™

`previousValue`
&emsp;**å‡¦ç†å‰ã®å€¤ï¼ˆç›´å‰ã®å‡¦ç†çµæœï¼‰**ã€‚åˆå›ã®å‘¼ã³å‡ºã—ã§ã¯ã€**initialValue** ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã¯ãã®å€¤ãŒã€ãã†ã§ãªã„å ´åˆã¯é…åˆ—ã®0ç•ªç›®ã®è¦ç´ ã®å€¤ãŒå…¥ã‚Šã¾ã™ã€‚
`currentValue`
&emsp;**ç¾åœ¨ã®é…åˆ—è¦ç´ ã®å€¤**ã€‚åˆå›ã®å‘¼ã³å‡ºã—ã§ã¯ã€**initialValue** ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã¯ é…åˆ—ã®0ç•ªç›®ã®è¦ç´ ãŒã€ãã†ã§ãªã„å ´åˆã¯ é…åˆ—ã®1ç•ªç›®ã®è¦ç´ ã®å€¤ãŒå…¥ã‚Šã¾ã™ã€‚
`currentIndex`
&emsp;**currentValue** ã®ä½ç½®ã€‚
`array`
&emsp;å¯¾è±¡ã®é…åˆ—ã€‚

**InitialValue**ã¯ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ãŒåˆã‚ã¦å‘¼ã³å‡ºã•ã‚ŒãŸã¨ãã® **previousValue** ã®åˆæœŸå€¤ã§ã™ã€‚
:::message
**InitialValue** ã¯çœç•¥ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€é…åˆ—ã®è¦ç´ ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã«çœç•¥ã™ã‚‹ã¨ã€ã†ã¾ãå‹•ä½œã—ãªã„ã®ã§ã€å€‹äººçš„ã«ã¯çœç•¥ã—ãªãã¦ã„ã„ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚
:::
# è‰¯ã„ç‚¹
åŒæ§˜ã®å‡¦ç†ã¯ **for** ã‚„ **forEach** ã§ã‚‚å‡ºæ¥ã¾ã™ã€‚ãƒ‡ãƒ¢ã®ä¾‹ã‚’ **forEach** ã«ç½®ãæ›ãˆã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚
```js
const array = [1, 2, 3];

let sum = 0

array.forEach((element) => {
ã€€ã€€sum += element
})
```
åŒæ§˜ã®çµæœã¯å¾—ã‚‰ã‚Œã¾ã™ãŒã€ã“ã‚Œã ã¨ä¸€æ™‚çš„ã«ãƒ«ãƒ¼ãƒ—ç”¨ã®å¤‰æ•° `i` ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ‚ªãã¯ãªã„ã‹ã‚‚çŸ¥ã‚Œã¾ã›ã‚“ãŒã€Reduce ã®æ–¹ãŒã‚ˆã‚Šç°¡æ½”ã§ã‚ã‹ã‚Šã‚„ã™ã„ã¨æ€ã„ã¾ã™ã—ã€const ãŒä½¿ãˆã‚‹ã®ã‚‚è‰¯ã„ç‚¹ã§ã™ã‚ˆã­ã€‚

forEach ã«ã¤ã„ã¦èª¿ã¹ã¦ã„ã‚‹ã¨ä»¥ä¸‹è¨˜äº‹ã‚’è¦‹ã¤ã‘ã¾ã—ãŸã€‚
https://qiita.com/diescake/items/70d9b0cbd4e3d5cc6fce
# ç”¨é€”
1. æœ€å¤§å€¤ã‚’æ±‚ã‚ã‚‹(æœ€å°å€¤ã‚‚å¯¾å¿œå¯)
```js
const arr = [10, 3, 4, 9]
 
const output = arr.reduce((prev, current) => {
  return prev < current ? current : prev 
}, 0)

// -> 10
```
2. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚ã‚‹è¦ç´ ã‚’åˆè¨ˆ
```js
const arr = [
  { name: "apple", plice: 100 },
  { name: "banana", plice: 150 },
  { name: "grape", plice: 300 },
]

const output = arr.reduce((prev, current) => {
  return prev + current.plice
}, 0)

// -> output = 550
```
3. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°(å¿œç”¨)
```js
const posts = [
  { title: "post 1", tag: "red" },
  { title: "post 2", tag: "blue" },
  { title: "post 3", tag: "blue" },
  { title: "post 4", tag: "red" },
]

const output = posts.reduce((prev, current) => ({
  ...prev,
  [current.tag]: [...(prev[current.tag] || []), current]
}), {});
```
```
{
  "red":[
    { "title": "post 1", "tag": "red" },
    { "title": "post 4","tag": "red" },
  ],
  "blue":[
    { "title": "post 2", "tag": "blue" },
    { "title": "post 3", "tag": "blue" },
  ]
}
```

# ç•ªå¤–ç·¨
æ™®æ®µã¯TypeScriptã§é–‹ç™ºã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€ç”¨é€”ã§3ç•ªç›®ã«ç´¹ä»‹ã—ãŸä¾‹ã ã¨TypeErrorã«ãªã£ãŸã®ã§ã€è‡ªåˆ†ãªã‚Šã«å‹ã‚’èª¿ã¹ã¦ã¤ã‘ã¦ã¿ã¾ã—ãŸã€‚ï¼ˆã‚‚ã£ã¨è‰¯ã„å‹ã‚„ã”æŒ‡æ‘˜ç­‰ã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆãã ã•ã„ğŸ™‡ï¼‰
```ts
type Post = {
  title: string
  tag: string
}

const posts = [
  // ...
] as const

const output = posts.reduce((prev, current) => ({
  ...prev,
  [current.tag]: [...(prev[current.tag] || []), current]
}), {} as { [key in "red" | "blue"]: Post[] }
```